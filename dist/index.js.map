{"mappings":"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","sources":["src/index.js","src/api/index.js","src/api/analytics/index.js","src/api/analytics/model.js","src/services/fauna/index.js"],"sourcesContent":["import API from './api'\n\nexport {API}","import AnalyticsAPI from './analytics'\n\n\nexport default {AnalyticsAPI}","import { Temporal } from '@js-temporal/polyfill';\nimport {pageAnalytics} from \"./model\";\nimport {create} from \"../../services/fauna\";\n\n\nconst initAnalytics = async (id, domain, page,referer) => {\n\n   return  await create(\n        pageAnalytics(id,domain,Temporal.Now.timeZone().toJSON(),page,referer),\n        'analytics'\n    )\n}\n\n\nconst trackPage = async (page) => {\n    await initAnalytics(localStorage.getItem('id'),window.location.origin, page,document.referrer)\n}\n\n\nexport default {initAnalytics,trackPage}","\nconst pageAnalytics = (id,domain, timezone, page,referer) => {\n    return (\n        {\n            id,\n            type: 'page',\n            domain,\n            timezone,\n            page,\n            referer\n        }\n    )\n}\n\nconst actionAnalytics = (id,domain, timezone,page,action) => {\n    return (\n        {\n            id,\n            type: 'action',\n            domain,\n            timezone,\n            page,\n            action\n        }\n    )\n}\n\nexport {pageAnalytics, actionAnalytics}","let faunadb = require('faunadb'),\n    q = faunadb.query\n\nconst faunaSDK = new faunadb.Client({\n    secret: process.env.FAUNASDK,\n    domain: 'db.fauna.com',\n    // NOTE: Use the correct domain for your database's Region Group.\n    port: 443,\n    scheme: 'https',\n})\n\n//add trycatch for devesive coding\nconst create = async (data,col) => {\n\n    return await faunaSDK.query(\n        q.Create(\n            q.Collection(col),\n            {data}\n        )\n    )\n}\n\nconst read = async (id,col=\"theplug\") => {\n\n    //console.log(\"id tp read\",id)\n    return await faunaSDK.query(\n        q.Get(\n            q.Ref(\n                q.Collection(col), id)\n        )\n\n    )\n}\n\nconst update = async (data, id,col) => {\n\n\n    return await faunaSDK.query(\n        q.Update(\n            q.Ref(q.Collection(col), id),\n            {data}\n        )\n    )\n}\n\nconst remove = async (id,col=\"theplug\") => {\n\n    console.log(\"removing the data\",id)\n    return await faunaSDK.query(\n        q.Delete(q.Ref(q.Collection(col), id))\n    )\n}\n\nconst findById = async (id, index =\"identity\") =>{\n\n    return await faunaSDK.query(\n        q.Get(q.Match(q.Index(index), id))\n    )\n}\n\n\nconst findByIndex = async (id, index =\"analyticIdentity \") =>{\n\n    let result = await faunaSDK.query(\n        q.Paginate(q.Match(q.Index(index), id)),\n    )\n\n    let exp = result.data.map((i) => q.Get(i))\n\n\n    let data = await faunaSDK.query(exp)\n\n    return data;\n}\n\nconst getAll = async (index = \"genus\") => {\n\n    let result = await faunaSDK.query(\n        q.Paginate(q.Documents(q.Collection(index))),\n    )\n\n    let exp = result.data.map((i) => q.Get(i))\n    let data = await faunaSDK.query(exp)\n\n    return data;\n}\n\nexport {create,update}\n\n"],"names":[],"version":3,"file":"index.js.map"}